-- circuits_db definition

CREATE TABLE circuits_db (
    circuitId SERIAL PRIMARY KEY,
    circuitRef VARCHAR(255) NOT NULL,
    name VARCHAR(255) NOT NULL,
    location VARCHAR(255),
    country VARCHAR(255),
    lat DECIMAL,
    lng DECIMAL,
    alt INTEGER,
    url VARCHAR(255)
);


-- constructor_db definition

CREATE TABLE constructor_db (
    constructorId SERIAL PRIMARY KEY,
    constructorRef VARCHAR(50) NOT NULL,
    name VARCHAR(100) NOT NULL,
    nationality VARCHAR(50),
    url VARCHAR(255)
);


-- seasons_db definition

CREATE TABLE seasons_db (

    seasonId SERIAL PRIMARY KEY,

    year INTEGER NOT NULL,

    url VARCHAR(255)

);


-- status_db definition

CREATE TABLE status_db (
    statusId SERIAL PRIMARY KEY,
    status VARCHAR(255) NOT NULL
);


-- drivers_db definition

CREATE TABLE drivers_db (
    driverId SERIAL PRIMARY KEY,
    driverRef VARCHAR(255) NOT NULL,
    number INTEGER,
    code VARCHAR(10),
    name VARCHAR(100), 
    nationality VARCHAR(50),
    url VARCHAR(255),
    date_of_birth DATE,
    constructorId INTEGER REFERENCES constructor_db(constructorId)
);


-- races_db definition

CREATE TABLE races_db (
    raceId SERIAL PRIMARY KEY,
    seasonId INTEGER REFERENCES seasons_db(seasonId),
    round INTEGER,
    circuitId INTEGER REFERENCES circuits_db(circuitId),
    name VARCHAR(100) NOT NULL,
    date DATE,
    time INTERVAL,
    url VARCHAR(255)
);


-- results_db definition

CREATE TABLE results_db (
    resultId SERIAL PRIMARY KEY,
    raceId INTEGER REFERENCES races_db(raceId),
    driverId INTEGER REFERENCES drivers_db(driverId),
    number INTEGER,
    grid INTEGER,
    position INTEGER, 
    points INTEGER,
    laps INTEGER,
    time VARCHAR(255), 
    milliseconds INTERVAL,
    fastestlap INTERVAL,
    rank INTEGER,
    fastestlaptime INTERVAL,
    fastestlapspeed INTERVAL,
    statusId INTEGER REFERENCES status_db(statusId)
);


-- laptimes_db definition

CREATE TABLE laptimes_db (
    raceId INTEGER REFERENCES races_db(raceId),
    driverId INTEGER REFERENCES drivers_db(driverId),
    lap INTEGER,
    position INTEGER,
    time INTERVAL,
    milliseconds INTERVAL,
    PRIMARY KEY (raceId, driverId, lap)
);


-- pitstops_db definition

CREATE TABLE pitstops_db (
    raceId INTEGER REFERENCES races_db(raceId),
    driverId INTEGER REFERENCES drivers_db(driverId),
    stop INTEGER,
    lap INTEGER,
    time INTERVAL,
    milliseconds INTERVAL,
    duration INTERVAL, 
    PRIMARY KEY (raceId, driverId, stop)
);


-- qualifying_db definition

CREATE TABLE qualifying_db (
    qualifyId SERIAL PRIMARY KEY,
    raceId INTEGER REFERENCES races_db(raceId),
    driverId INTEGER REFERENCES drivers_db(driverId),
    number INTEGER,
    position INTEGER
);


-- qualifying_qs_db definition

CREATE TABLE qualifying_qs_db (
    qualifyId INTEGER REFERENCES qualifying_db(qualifyId),
    Q INTEGER, 
    time_q VARCHAR(255),
    PRIMARY KEY (qualifyId, Q)
);